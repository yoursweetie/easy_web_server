# easy_web_server
这是一个使用了<u>多进程</u>, <u>IO多路复用(epoll)</u>的简单的 HTTP 服务器
- 多进程是指主进程创建监听 fd, 根据 cpu 个数创建的子进程对请求进行处理
- IO 多路复用:
    1. 是指使用了 epoll 相关的系统调用, 每一个子进程一个 epoll, 如果 listen_fd 上有事件发生, 即表明有新的连接, 将新连接的fd加入到内核 epoll 的事件集中
    2. 如果是连接 fd 上有事件发生, 那么调用相应的处理函数来相应 HTTP 请求

> 使用方法

1. 编译
   `make`

2. 运行

   `./server`

   默认的监听端口为8080

   浏览器中打开

   `127.0.0.1:/8080`

   或者

   `127.0.0.1:/8080/test.html`

3. htdocs 目录存放的是html 文件, 请求的文件是从这里取出来的

> TO_DO

多个进程处理请求, 不可避免的发生"惊群"效应
所谓"惊群", 是指并发环境下, 多线程或多进程等待同一个 socket 事件, 当这个事件发生时, 多线程/多进程被同时唤醒. 对应本程序, 多个子进程通过调用 epoll_wait 等待 listen_fd 上某个事件发生. 当有新连接进来时, 多个进程会被同时唤醒去处理这个事件. 但最终只有一个进程可以去处理事件, 其他进程重新进入等待状态.
这会造成无端的消耗系统资源, nginx 的做法是加锁, Lighthttpd就是忽略的做法
本程序就直接忽略"惊群"效应
